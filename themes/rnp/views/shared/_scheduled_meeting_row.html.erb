<tr class="d-flex row tr-row">
  <td class="col-10 col-md-5 align-middle td-titles">
    <div class="item-title word-break"><%= meeting.name %></div>
    <% unless meeting.description.blank? %>
      <div class="item-description word-break"><%= meeting.description %></div>
    <% end %>
  </td>
  <td class="col-12 col-md-3 align-middle">
    <%= format_date(meeting.start_at) %>
    <% unless meeting.repeat.blank? %>
      <span class="badge badge-recurring">
        <i class="icon material-icons">repeat</i>
        <span><%= t("default.scheduled_meeting.repeat_options.#{meeting.repeat}") %></span>
      </span>
    <% end %>
  </td>
  <td class="col-12 col-md-2 align-middle">
    <% if meeting.duration > 0 %>
      <%= duration_in_hours_and_minutes(meeting.duration).capitalize %>
    <% end %>
  </td>
  <td class="col-12 col-md-1 align-middle">
    <% can_join = !(wait_for_mod?(meeting, user)) %>
    <% if can_join && device_type? != 'desktop' %>
      <%= form_with url: join_room_scheduled_meeting_path(room, meeting), id: "join-form-#{meeting.hash_id}" do |form| %>
        <button class="btn btn-primary join-room-btn" type="button" data-bs-toggle="offcanvas" data-bs-target=<%="#offcanvasBottom-#{meeting.hash_id}"%> aria-controls="offcanvasBottom">
          <i class="icon material-icons">play_arrow</i>
        </button>
        <%= render "shared/app_offcanvas", room: room, meeting: meeting, target_blank: !(browser.safari? || browser.safari_webapp_mode?) %>
      <% end %>
    <% elsif browser.safari? || browser.safari_webapp_mode? %>
      <%= link_to join_room_scheduled_meeting_url(room, meeting, no_auto_join: true), class: "btn btn-primary join-room-btn", data: { 'tracking-id': 'lti-join-session', 'institution-guid': "#{@institution_guid}" } do %>
        <i class="icon material-icons">play_arrow</i>
      <% end %>
    <% else %>
      <%= link_to join_room_scheduled_meeting_url(room, meeting, no_auto_join: true), class: "btn btn-primary join-room-btn create-session-token", data: { 'tracking-id': 'lti-join-session', 'institution-guid': "#{@institution_guid}" }, target: '_blank' do %>
        <i class="icon material-icons">play_arrow</i>
      <% end %>
    <% end %>
  </td>
  <td class="col-2 col-md-1 align-middle td-dropdown-opts">
    <% if can_edit?(user, room) %>
      <div class="dropdown dropdown-opts">
        <a href="#" class="dropdown-toggle d-flex text-decoration-none" id="dropdown-opts-<%= room.to_param %>" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="icon material-icons">more_vert</i>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdown-opts-<%= room.to_param %>">
          <% unless meeting.disable_external_link || hide_disable_external_link?(room) %>
            <%=
            link_to t('scheduled_meetings.external_link'), '#',
            data: {
              'clipboard-text': external_room_scheduled_meeting_url(room, meeting),
              turbolinks: false,
              'toast-id': '#external-link-copied-toast',
              'tracking-id': 'lti-copy-external-link',
              'institution-guid': "#{@institution_guid}"
            },
            class: "dropdown-item copy-to-clipboard"
            %>
            <div class="dropdown-divider"></div>
          <% end %>
          <%=
          link_to t('scheduled_meetings.edit.action'),
           edit_room_scheduled_meeting_path(room, meeting),
           class: "dropdown-item",
           data: { 'tracking-id': 'lti-edit-scheduled-meeting', 'institution-guid': "#{@institution_guid}" }
          %>
          <%=
          link_to t('scheduled_meetings.destroy'),
           room_scheduled_meeting_path(room, meeting),
           class: "dropdown-item",
           method: :delete,
           data: { confirm: t('default.scheduled_meeting.destroy.confirmation'), 'tracking-id': 'lti-delete-scheduled-meeting', 'institution-guid': "#{@institution_guid}" }
          %>
        </div>
      </div>
    <% end %>
  </td>
</tr>
